/**
 * written by te5seract (Isaac)
 * https://te5seract.tumblr.com/
 */
const x=function(){const xeniumHelpers=(f={exe:function(element,hook,...values){var result;return(values=this.unravelArray(values)).length>0?element[hook].apply(element,values):element[hook]},unravelArray:function(array){var object=array;return object[0]instanceof Array&&(object=this.unravelArray(object[0])),object},nodeRelatives:function(element,method){var nodes=[];if(method.match(/children|childNodes/gi)){var children=element.querySelectorAll("*");for(let i=0;i<children.length;i++)nodes.push(children[i])}else for(;element;)nodes.push(element[method]),element=element[method];return nodes.filter(Boolean)},arrayGet:function(mode,array,identifier){var idClear=identifier.replace(/\.|#/g,"");for(let i=0;i<array.length;i++)if(array[i]!==document)if(mode.match(/node|nodes|query/i)){if(array[i].hasAttribute("class")&&array[i].classList.contains(idClear)||array[i].hasAttribute("id")&&array[i].getAttribute("id")===idClear||array[i].localName===idClear)return array[i]}else if(mode.match(/item|items|number|numbers|string|standard/i)&&array[i]===identifier)return array[i]},htmlToString:function(array){(!array.length||!array instanceof Array)&&(array=[array]);var strNodes=[];for(let i=0;i<array.length;i++)array[i].hasAttribute("class")?strNodes.push(array[i].localName+"."+array[i].getAttribute("class").split(" ").join(",")):array[i].hasAttribute("id")?strNodes.push(array[i].localName+"#"+array[i].getAttribute("id")):strNodes.push(array[i].localName);return strNodes},escape:function(string){var modified="";return(modified=(modified=(modified=(modified=(modified=(modified=(modified=(modified=(modified=(modified=(modified=(modified=(modified=string.match(/(\[)/gim)?string.replace(/(\[)/gim,"\\$1"):string).match(/(\])/gim)?modified.replace(/(\])/gim,"\\$1"):modified).match(/(\{)/gim)?modified.replace(/(\{)/gim,"\\$1"):modified).match(/(\})/gim)?modified.replace(/(\})/gim,"\\$1"):modified).match(/(\()/gim)?modified.replace(/(\()/gim,"\\$1"):modified).match(/(\))/gim)?modified.replace(/(\))/gim,"\\$1"):modified).match(/(\.)/gim)?modified.replace(/(\.)/gim,"\\$1"):modified).match(/(\*)/gim)?modified.replace(/(\*)/gim,"\\$1"):modified).match(/(\.)/gim)?modified.replace(/(\.)/gim,"\\$1"):modified).match(/(\+)/gim)?modified.replace(/(\+)/gim,"\\$1"):modified).match(/(\|)/gim)?modified.replace(/(\|)/gim,"\\$1"):modified).match(/(\?)/gim)?modified.replace(/(\?)/gim,"\\$1"):modified).match(/(\^)/gim)?modified.replace(/(\^)/gim,"\\$1"):modified).match(/(\$)/gim)?modified.replace(/(\$)/gim,"\\$1"):modified},quote:function(items){var quoted;return items.replace(/(\\|\^|\$|\.|\||\?|\*|\+|\(|\))/g,"\\$1")},arrayIndex:function(subject,needle){var indexes=[];for(let i=0;i<subject.length;i++)for(let x=0;x<needle.length;x++){var reg=new RegExp(`${this.quote(needle[x])}`);subject[i].match(reg)&&indexes.push(i)}return indexes},removeArrayIndex:function(subject,index){for(let i=0;i<index.length;i++)subject[index[i]]="";return subject.filter(Boolean)},splitHTML:function(html,letter){var nodeMatches=html.match(/(<.*?>)/gi);for(let i=0;i<nodeMatches.length;i++)if(nodeMatches[i]){var nodeSpaces=html.match(/(<.*?>)/gi)[i].replace(/ /g,"{#nodeSpace}"),node=html.match(/(<.*?>)/gi)[i],node=new RegExp(`${node}`,"ig");html=html.replace(node,nodeSpaces)}html=html.split(" ");for(let i=0;i<html.length;i++)html[i].match(/<.*?>/gi)&&(html[i]=html[i].replace(/(<.*?>)/gi," $1 "));if(letter){var letters=[];html=(html=html.join(" ").replace(/ /g," {#splitSpace};")).split("{#splitSpace};");for(let i=0;i<html.length;i++)if(html[i].match(/<.*?>/gi))letters.push(html[i].replace(/{#nodeSpace}/g," "));else{html[i]=html[i].split("");for(let x=0;x<html[i].length;x++)letters.length>1&&letters[i-1],letters.push(html[i][x])}return letters}return html.join(" ").replace(/ {2,}|{#nodeSpace}/g," ").split(" ")},elementIdentifier:function(nodes,identifier){var noIdChars=identifier.replace(/\.|#/g,"");for(let i=0;i<nodes.length;i++)if(nodes[i]!==document&&(nodes[i].hasAttribute("class")&&nodes[i].classList.contains(noIdChars)||nodes[i].hasAttribute("id")&&nodes[i].getAttribute("id")===noIdChars||nodes[i].localName===identifier))return!0;return!1},type:function(item){return item instanceof Array?"array":item instanceof Object?"object":typeof item},extractIdentifier:function(element,validSelector){var classes=[],id="";for(let i=0;i<element.classList.length;i++)classes.push(element.classList[i]);return classes=classes.length>1?classes:classes[0],validSelector&&(classes="array"===this.type(classes)?"."+classes.join("."):"."+classes,element.getAttribute("id")&&element.getAttribute("id")),{id:"",classList:classes}}},f);var f;const xeniumSelector=function(){var helper=xeniumHelpers;function selectorCopy(selector){selector=selector.replace(/ /g,"").replace(/, | ,/,",").split(",");var queryString="";for(let i=0;i<selector.length;i++)if(selector[i].match(/\(( |)copy\(\d+\)( |):( |).*?( |)({.*}|)( |)\)/gim)){var colonSplit=selector[i].replace(/ :|: /g,":").split(":"),amount=Number(colonSplit[0].replace(/\(|\)|copy/gi,"")),subject=colonSplit[1].replace(/\(|\)| /gi,""),comma=i!==selector.length-1?",":"";for(let x=0;x<amount;x++)queryString+=x+1!==amount?subject+", ":subject+comma}else queryString+=i!==selector.length-1?selector[i]+", ":selector[i];return queryString}function groupIterator(selector){selector=selector.replace(/ /g,"").replace(/, | ,/,",").split(",");var queryString="";for(let i=0;i<selector.length;i++)if(selector[i].match(/\(( |)group\(\d+\)( |):( |).*?( |)({.*})( |)\)/gim)){var colonSplit=selector[i].replace(/ :|: /g,":").split(":"),amount=Number(colonSplit[0].replace(/\(|\)|group/gi,"")),subject;queryString+=colonSplit[1].replace(/\(|\)| |{.*}/gi,"")+"{";for(let x=0;x<amount;x++){var cap="}";i!==selector.length-1&&(cap+=", "),queryString+=x+1!==amount?x+1+" & ":x+1+cap}}else queryString+=i!==selector.length-1?selector[i]+", ":selector[i];return queryString}function prepareSelector(selector,callback){if(selector){var originalSelector=selector;return isString(selector)&&selector.match(/{#}|{dom}|{d}/i)?selector=document:isString(selector)&&selector.match(/{body}|{b}/i)?selector=document.body:isString(selector)&&selector.match(/{w}/i)?selector=window:isString(selector)&&selector.match(/{head}|{h}/i)&&(selector=document.head),isString(selector)&&selector.match(/\(( |)copy\(\d+\)( |):( |).*?( |)({.*}|)( |)\)/gim)&&(selector=selectorCopy(selector)),isString(selector)&&selector.match(/\(( |)group\(\d+\)( |):( |).*?( |)({.*})( |)\)/gim)&&(selector=groupIterator(selector)),selector="string"==typeof(selector=unravelArray(selector))?selector.replace(/, |,| ,/gm,",").split(","):selector,"array"!==helper.type(selector)&&(selector=[selector]),callback(selector,originalSelector)}}function unravelArray(array){var object=array;return"array"===helper.type(object[0])&&(object=unravelArray(object[0])),object}function isString(selector){if("string"==typeof selector)return!0}function validateSelector(selector,type){if(!isString(selector))return selector;if(selector.match(/\.|#/g))return selector;switch(selector=selector.replace(/{.*?}/,""),type){case"class":if(!selector.match(/\./))return"."+selector;case"id":if(!selector.match(/#/))return"#"+selector;case"node":if(!selector.match(/\[|\]/))return`[${selector}]`;default:return selector}}function querySelector(query,within,isSingle){var nodes;if(isSingle){try{within.querySelector(query)}catch(e){return[]}nodes=within.querySelector(query)?[within.querySelector(query)]:[]}else{nodes=[];try{within.querySelectorAll(query)}catch(e){return[]}for(let i=0;i<within.querySelectorAll(query).length;i++)nodes.push(within.querySelectorAll(query)[i])}return 0!==nodes.length&&nodes.filter(Boolean),nodes}function query(selector,within,isSingle){var classQuery=validateSelector(selector,"class"),idQuery=validateSelector(selector,"id"),attrQuery=validateSelector(selector,"node"),nodeQuery=validateSelector(selector),within,isSingle,elements;return 0!==querySelector(classQuery,within=within||document,isSingle=void 0===isSingle).length?elements=querySelector(classQuery,within,isSingle):0!==querySelector(idQuery,within,isSingle).length?elements=querySelector(idQuery,within,isSingle):0!==querySelector(attrQuery,within,isSingle).length?elements=querySelector(attrQuery,within,isSingle):0!==querySelector(nodeQuery,within,isSingle).length&&(elements=querySelector(nodeQuery,within,isSingle)),elements}function noFlag(selector,within){return isString(selector)||within?selector=query(selector,within):selector}function allFlag(selector,within){if(isString(selector)||within)return query(selector=selector.replace(/{( |)(all|\*)( |)}/gim,""),within,!1)}function evenFlag(selector,within){if(isString(selector)||within){var nodes=[];if(selector=query(selector=selector.replace(/{( |)(even|evn)( |)}/gim,""),within,!1)){for(let i=0;i<selector.length;i++)if(2*i-1>0){if(!selector[2*i-1])break;nodes.push(selector[2*i-1])}return nodes}}}function oddFlag(selector,within){if(isString(selector)||within){var nodes=[];if(selector=query(selector=selector.replace(/{( |)(odd)( |)}/gim,""),within,!1)){for(let i=0;i<selector.length&&selector[2*i];i++)nodes.push(selector[2*i]);return nodes}}}function directFlag(selector,within){if(isString(selector)||within){var flag=selector.split("{")[1].replace(/{|}/gim,"");return(selector=query(selector=selector.replace(/{( |)(\d+|last)( |)}/gim,""),within,!1))?selector[flag=(flag=(flag=flag.match(/\d+/)?Number(flag)-1:selector.length-1)<0?0:flag)>selector.length-1?selector.length-1:flag]:void 0}}function rangeFlag(selector,within){if(isString(selector)||within){var flag=(selector=selector.replace(/>>/gim,">")).split("{")[1].replace(/{|}/gim,""),rangeA=Number(flag.split(">")[0]),rangeB=flag.split(">")[1];if(selector=query(selector=selector.replace(/{( |)(\d+( |)>( |)(\d+|last))}/gim,""),within,!1)){var nodes=[];rangeA=(rangeA=rangeA-1<0?0:rangeA-1)>selector.length-1?selector.length-1:rangeA,rangeB=(rangeB=(rangeB=rangeB.match(/\d+/)?Number(rangeB):selector.length)<0?0:rangeB)>selector.length?selector.length:rangeB;for(let i=rangeA;i<rangeB&&i!==rangeB;i++)nodes.push(selector[i]);return nodes}}}function groupFlag(selector,within){if(isString(selector)||within){var flag=selector.split("{")[1].replace(/{|}/gim,"");if(selector=query(selector=selector.replace(/{.*?}/gim,""),within,!1)){var nodes=[],indexes=(flag=flag.replace(/last|final/gim,selector.length)).replace(/( |)&( |)/gim,"&").split("&");for(let i=0;i<indexes.length;i++){var index,index=(index=indexes[i]-1<0?0:indexes[i]-1)>selector.length-1?selector.length-1:index;nodes.push(selector[index])}return nodes}}}function randFlag(selector,within){if(isString(selector)||within){var flag=selector.split("{")[1].replace(/{|}/gim,"");if(selector=query(selector=selector.replace(/{( |)(rand|random)( |)=( |).*?}/gim,""),within,!1)){var rand=Math.floor(Math.random(1)*selector.length),flagAmount=flag.replace(/( |)=( |)/g,"=").split("=")[1],nodes=[];if(rand=(rand=rand<0?0:rand)===selector.length?selector.length-1:rand,flagAmount.match(/all/i)&&rand>0)for(let i=0;i<rand;i++)nodes.push(selector[i]);else(flagAmount.match(/single/i)||0===rand)&&nodes.push(selector[rand]);return nodes}}}var lib={selector:function(selector,within){return unravelArray(selector instanceof Array?selector:prepareSelector(selector,(function(selector,original){var node=[],nodeItem;for(let i=0;i<selector.length;i++)if(nodeItem=isString(selector[i])&&selector[i].match(/{( |)(all|\*)( |)}/gim)?allFlag(selector[i],within):isString(selector[i])&&selector[i].match(/{( |)(even|evn)( |)}/gim)?evenFlag(selector[i],within):isString(selector[i])&&selector[i].match(/{( |)(odd)( |)}/gim)?oddFlag(selector[i],within):isString(selector[i])&&selector[i].match(/{( |)(\d+|last|final)( |)}/gim)?directFlag(selector[i],within):isString(selector[i])&&selector[i].match(/{( |)(\d+( |)(>|>>)( |)(\d+|last|final))}/gim)?rangeFlag(selector[i],within):isString(selector[i])&&selector[i].match(/{(( |)(\d+|last|final)( |)&( |)(\d+|last|final)( |)){1,}|(( |)&( |)(\d+|last|final)( |)){1,}}/gim)?groupFlag(selector[i],within):isString(selector[i])&&selector[i].match(/{( |)(rand( |)=( |)(single|all)|random( |)=( |)(single|all))( |)}/gim)?randFlag(selector[i],within):noFlag(selector[i],within))if(nodeItem.length)for(let x=0;x<nodeItem.length;x++)node.push(nodeItem[x]);else node.push(nodeItem);return node})));var element},updateSelector:function(oldSelector,newSelector){var nodes=[];"number"===helper.type(newSelector)&&nodes.push(newSelector);for(let i=0;i<oldSelector.length;i++)if(lib.selector(newSelector,oldSelector[i]))for(let x=0;x<lib.selector(newSelector,oldSelector[i]).length;x++)nodes.push(lib.selector(newSelector,oldSelector[i])[x]);for(let i=0;i<oldSelector.length;i++)delete oldSelector[i];if(0===nodes.length&&(nodes=null),nodes){nodes.length||(nodes=[nodes]);for(let i=0;i<nodes.length;i++)oldSelector[i]=nodes[i];oldSelector.length=nodes.length}nodes||(oldSelector.length=0)},replaceSelector:function(oldSelector,newSelector){(!newSelector||!newSelector instanceof Array||!newSelector.length)&&(newSelector=[newSelector]);for(let i=0;i<oldSelector.length;i++)delete oldSelector[i];for(let i=0;i<newSelector.length;i++)oldSelector[i]=newSelector[i];oldSelector.length=newSelector.length}};return lib}(),xeniumContext=function(){var ctx={},helper=xeniumHelpers,query=xeniumSelector;return ctx.ini=function(selector,context,instance){return ctx.selector=selector,ctx.context=context,ctx.instance=instance,"contains"in context?ctx.contains():"node"in context?ctx.node():"value"in context?ctx.value():"replace"in context?ctx.replace():void 0},ctx.replace=function(){var selector=this.selector,context=this.context,instance=this.instance;for(let i=0;i<selector.length;i++){var elem=helper.exe(document,"createElement",context.replace);for(let item in selector[i].attributes){if(!selector[i].attributes[item].name)break;helper.exe(elem,"setAttribute",selector[i].attributes[item].name,selector[i].attributes[item].nodeValue),elem.innerHTML=selector[i].innerHTML||selector[i].value,elem.value=selector[i].innerHTML||selector[i].value}document.body.insertBefore(elem,selector[i]),selector[i].remove()}return instance},ctx.value=function(){var selector=this.selector,context=this.context;for(let i=0;i<selector.length;i++)selector[i].removeAttribute("value"),selector[i].value=context.value},ctx.node=function(){var context=this.context,selector=this.selector;return query.selector(context.node)},ctx.contains=function(){var context=this.context,selector=this.selector,type=helper.type(context.contains);if("array"===type){for(let i=0;i<context.contains.length;i++)if(-1!==this.selector.indexOf(context.contains[i]))return!0}else if("object"===type)for(let item in context.contains)if(-1!==this.selector.indexOf(context.contains[item]))return!0;return-1!==this.selector.indexOf(context.contains)},ctx}();var wrapper=[],sel,proto=Xenium.prototype,query=xeniumSelector,helper=xeniumHelpers;function Xenium(element,selector,context){if(!element)return[];this.__proto__.selectorString=function(){return selector};for(let i=0;i<element.length;i++)this[i]=element[i];this.length=element.length,context&&query.replaceSelector(this,xeniumContext.ini(element,context,this))}return proto.splice=wrapper.splice,proto.within=function(selector){return query.updateSelector(this,selector),this.__proto__.selectorString=function(){return selector},this},proto.goto=function(direction,identifier){if(direction.match(/parents|parent|up/gi))query.replaceSelector(this,helper.arrayGet("nodes",helper.nodeRelatives(this[0],"parentNode"),identifier));else if(direction.match(/children|child|down/gi)){var children=this[0].querySelectorAll("*");query.replaceSelector(this,helper.arrayGet("nodes",children,identifier))}else direction.match(/next|right/gi)?query.replaceSelector(this,helper.arrayGet("nodes",helper.nodeRelatives(this[0],"nextElementSibling"),identifier)):direction.match(/prev|previous|left/gi)&&query.replaceSelector(this,helper.arrayGet("nodes",helper.nodeRelatives(this[0],"previousElementSibling"),identifier));return this.__proto__.selectorString=function(){return identifier},this},proto.query=function(selector,context){return query.replaceSelector(this,query.selector(selector)),this.__proto__.selectorString=function(){return selector},context&&query.replaceSelector(this,xeniumContext.ini(this,context,this)),this},proto.flag=function(delimiter,...flag){if(!this.__proto__.selectorString()||"object"==typeof this.__proto__.selectorString())return this;var selector=this.__proto__.selectorString().replace(/( |){.*?}( |)/g,"").split(",");for(let i=0;i<this.length;i++)if(!helper.elementIdentifier(this[i],selector)){var node=this[0];this.__proto__.selectorString=function(){return helper.getElementIdentifier(node)}}selector=this.__proto__.selectorString().replace(/( |){.*?}( |)/g,"").split(",");var delimiter=delimiter||" ",newQuery="";for(let i=0;i<selector.length;i++){var newSelector;newQuery+=i!==selector.length-1?selector[i]+`{${flag.join(delimiter)}}, `:selector[i]+`{${flag.join(delimiter)}}`}return query.replaceSelector(this,query.selector(newQuery)),this},proto.iframe=function(part){for(let i=0;i<this.length;i++)part&&part.match(/head|header|h/)?query.replaceSelector(this,this[i].contentDocument.head):part&&part.match(/body|b/)?query.replaceSelector(this,this[i].contentDocument.body):query.replaceSelector(this,this[i].contentDocument);return this},proto.attr=function(action,value){if(!action|!value)return this;var valueItems=value.replace(/ ,|, /g,",").split(","),attrVals=[];for(let i=0;i<this.length;i++)for(let x=0;x<valueItems.length;x++)if(action.match(/set|setAttr|setAttribute|apply/i)){var values=valueItems[x].split("=");helper.exe(this[i],"setAttribute",values[0],values[1])}else action.match(/del|delAttr|delete|deleteAttribute|remove|removeAttr|removeAttribute/)?helper.exe(this[i],"removeAttribute",valueItems[x]):action.match(/get|getAttr|getAttribute/)&&attrVals.push(helper.exe(this[i],"getAttribute",valueItems[x]));return(attrVals=1===(attrVals=attrVals.filter(Boolean)).length?attrVals[0]:attrVals).length>0&&attrVals},proto.classList=function(action,value){var valueItems=value.replace(/ ,|, /g,",").split(",");for(let i=0;i<this.length;i++)for(let x=0;x<valueItems.length;x++)if(action.match(/add|\+/gi))helper.exe(helper.exe(this[i],"classList"),"add",valueItems[x]);else if(action.match(/delete|remove|\-/gi))helper.exe(helper.exe(this[i],"classList"),"remove",valueItems[x]);else if(action.match(/swap|switch/gi)){var swap=valueItems[x].replace(/( |)>( |)/,">").split(">");helper.exe(helper.exe(this[i],"classList"),"remove",swap[0]),helper.exe(helper.exe(this[i],"classList"),"add",swap[1])}else if(action.match(/hasClass|has|contains/gi))return helper.exe(helper.exe(this[i],"classList"),"contains",valueItems[x]);return this},proto.css=function(css,append){for(let i=0;i<this.length;i++)append?this[i].style.cssText+=css:this[i].style.cssText=css;return this},proto.cssValue=function(property,value){for(let i=0;i<this.length;i++)return value?this[i].style[property]===value:this[i].style[property]},proto.write=function(method,value,append){for(let i=0;i<this.length;i++)method.match(/html|innerHTML/i)?append?this[i].innerHTML+=value:this[i].innerHTML=value:method.match(/outer|outerHTML/i)?append?this[i].outerHTML+=value:this[i].outerHTML=value:method.match(/text|txt/i)&&(append?this[i].textContent+=value:this[i].textContent=value);return this},proto.make=function(node,amount,attr,append){if(node){var amount=amount||1,attrSplit=attr?attr.replace(/ ,|, /g,",").split(","):null,nodes=[];for(let i=0;i<this.length;i++)for(let x=0;x<amount;x++){var newNode=document.createElement(node);if(attr)for(let j=0;j<attrSplit.length;j++){var attrSegs=attrSplit[j].replace(/( |)=( |)/g,"=").split("=");helper.exe(newNode,"setAttribute",attrSegs[0],attrSegs[1])}append?this[i].append(newNode):nodes.push(newNode)}return append?this:nodes}},proto.append=function(...nodes){for(let i=0;i<this.length;i++)for(let x=0;x<nodes.length;x++)nodes[x]=helper.unravelArray(nodes[x]),nodes[x]instanceof Array&&(nodes[x]=nodes[x][0]),this[i].appendChild(nodes[x]);return this},proto.prepend=function(node,before){for(let i=0;i<node.length;i++)this[0].insertBefore(node[i],query.selector(before)[0])},proto.next=function(amount,...exclude){var nextElements=helper.nodeRelatives(this[0],"nextElementSibling").filter(Boolean),indexes=helper.arrayIndex(helper.htmlToString(nextElements),exclude),nextElements,next=[],amount,amount=(amount=amount?amount-1:0)>(nextElements=helper.removeArrayIndex(nextElements,indexes)).length?nextElements.length-1:amount;for(let i=0;i<nextElements.length;i++)i===amount&&next.push(nextElements[i]);return next.length>0&&query.replaceSelector(this,next),this},proto.prev=function(amount,...exclude){var previousElements=helper.nodeRelatives(this[0],"previousElementSibling").filter(Boolean),indexes=helper.arrayIndex(helper.htmlToString(previousElements),exclude),previousElements,prev=[],amount,amount=(amount=amount?amount-1:0)>(previousElements=helper.removeArrayIndex(previousElements,indexes)).length?previousElements.length-1:amount;for(let i=0;i<previousElements.length;i++)i===amount&&prev.push(previousElements[i]);return prev.length>0&&query.replaceSelector(this,prev),this},proto.children=function(allChildren){var result;return allChildren?query.selector("* {all}",this[0]):helper.exe(this[0],"children")},proto.parents=function(){return helper.nodeRelatives(this[0],"parentNode")},proto.nodeIndex=function(){var indexes=[];for(let i=0;i<this.length;i++){var{classList:classList,id:id}=helper.extractIdentifier(this[i],!0),sameElements=query.selector(`${classList+id} {all}`,document);for(let x=0;x<sameElements.length;x++)sameElements[x]===this[i]&&indexes.push(x)}return indexes.length>1?indexes:indexes[0]},proto.contains=function(value){return query.selector(value,this[0]).length>0},proto.childOf=function(value,callback){var parents=helper.nodeRelatives(this[0],"parentNode"),found=helper.elementIdentifier(parents,value);return found&&callback&&callback(parents),found},proto.parentOf=function(value,callback){var children=helper.nodeRelatives(this[0],"children"),found=helper.elementIdentifier(children,value);return found&&callback&&callback(children),found},proto.moveContent=function(moveTo,method,deleteOnMove){var selector=query.selector(moveTo),methods=method.split(/ ,|, /g),deleteOnMove=!(void 0!==deleteOnMove&&!deleteOnMove);for(let i=0;i<this.length;i++)for(let x=0;x<selector.length;x++)for(let j=0;j<methods.length;j++)if(methods[i].match(/\B\*\B|\Ball\B/)){var content=this[i].innerHTML;selector[x].innerHTML+=content,deleteOnMove&&x===selector.length-1&&(this[i].innerHTML="")}else{var moveItem=query.selector(methods[j],this[i]);for(let z=0;z<moveItem.length;z++)selector[x].innerHTML+=moveItem[z].outerHTML,deleteOnMove&&x===selector.length-1&&moveItem[z].remove()}},function(){function isTarget(target,identifier){var found=!1;for(let i=0;i<identifier.length;i++)target.hasAttribute("class")&&target.classList.contains(identifier[i])||target.hasAttribute("id")&&target.getAttribute("id")===identifier[i]||target.hasAttribute(identifier)?found=!0:target.localName===identifier[i]&&(found=!0);return found}var helper=xeniumHelpers;proto.events=function(type,callback){type=type.replace(/ ,|, /g,",").split(",");for(let i=0;i<this.length;i++)for(let x=0;x<type.length;x++)helper.exe(this[i],"addEventListener",type[x],fn);function fn(e){var target=e.target;e.isTarget=function(identifier,callback){var callbackResult;return identifier=identifier.replace(/\.|#/g,"").replace(/ ,|, /g,",").split(","),isTarget(target,identifier)?!callback||callback():!!callback&&null},e.isEvent=function(eventType,callback){var result=!1,callbackResult;return e.type===eventType&&(callback&&(callbackResult=callback()),result=!0),callbackResult},callback&&callback(e,target)}return this},proto.loaded=function(callback){return helper.exe(window,"addEventListener","load",()=>{callback&&callback()}),this}}(),proto.value=function(type){var values=[];for(let i=0;i<this.length;i++)!type&&this[i].value&&values.push(this[i].value),type&&(type.match(/text|textContent/gi)?values.push(this[i].textContent):type.match(/html|innerHTML/gi)?values.push(this[i].innerHTML):type.match(/outer|outerHTML/gi)?values.push(this[i].outerHTML):this[i].hasAttribute(type)&&values.push(this[i].getAttribute(type)));return 1===values.length||0===values.length?values[0]:values},proto.checked=function(){var checks=[];for(let i=0;i<this.length;i++)checks.push(this[i].checked);return 1===checks.length?checks[0]:checks},proto.copy=function(text){var textarea=document.createElement("textarea");return textarea.textContent=text,textarea.setAttribute("class","_xenium_clipboard"),document.body.appendChild(textarea),textarea.focus(),textarea.select(),document.execCommand("copy"),this},proto.unravelArray=function(array){return helper.unravelArray(array)},proto.htmlToString=function(array){return array||(array=this),helper.htmlToString(array)},proto.strEscape=function(text){return helper.quote(text)[0]},proto.foreach=function(callback){if(this[0]instanceof Array||this.length>1)for(let i=0;i<this.length;i++)callback&&callback(this[i],i);else if(this[0]instanceof Object)for(let i in this[0])callback&&callback(this[0][i],i);return this},proto.ajax=function(options,callback,includeHeaders){var xh=new XMLHttpRequest,method=options.method||options.type,url=options.url||options.open||options.link||options.location||options.action,data=options.data||options.send||options.content||options.payload||"",includeHeaders=!(void 0!==includeHeaders&&!includeHeaders),ajaxData={};xh.open(method,url),includeHeaders&&xh.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xh.onreadystatechange=function(){if(4===xh.readyState&&200===xh.status){var response=xh.responseText,json="";try{json=JSON.parse(response)}catch(er){}ajaxData={response:response,json:json},callback&&callback(ajaxData)}},xh.send(data)},proto.files=function(callback){if(callback){for(let i=0;i<this[0].files.length;i++)callback(this[0].files);return this}return this[0].files},proto.remove=function(){for(let i=0;i<this.length;i++)this[i].remove();return this},proto.limit=function(type,amount,tail){var limited=[],subject,joinMethod,iteration=0,tail=tail||"";type.match(/word|words/gi)?(subject=helper.splitHTML(this[0].innerHTML),joinMethod=" "):type.match(/letter|letters|text|txt/gi)&&(subject=helper.splitHTML(this[0].innerHTML,!0),joinMethod="",amount+=1);for(let i=0;i<subject.length&&iteration!==amount;i++)subject[i].match(/<.*?>| |<.*?|.*?>/)||iteration++,limited.push(subject[i]);return this[0].innerHTML=limited.join(joinMethod).replace(/ {2,}/g," ")+tail,this},proto.changeCase=function(type){for(let i=0;i<this.length;i++)if(this[i].textContent.length>0){var html=helper.splitHTML(this[i].innerHTML);if(type.match(/upper|upperCase/gi))this[i].innerHTML=this[i].innerHTML.toUpperCase();else if(type.match(/lower|lowerCase/))this[i].innerHTML=this[i].innerHTML.toLowerCase();else if(type.match(/camel|camelCase/gi)){for(let x=0;x<html.length;x++)if(!html[x].match(/<.*?>| |<.*?|.*?>/)){var wordSplice=html[x].replace(/\n/g,"").split(""),firstLetter=wordSplice.splice(0,1).join("").toUpperCase(),finalLetters=wordSplice.join("");html[x]=firstLetter+finalLetters}this[i].innerHTML=html.join(" ")}else if(type.match(/sentence|sentenceCase/gi)){var letters=html[0].split(""),firstLetter="",firstLetterIndex;for(let x=0;x<letters.length;x++)if(letters[x].match(/\w/)){firstLetter=letters[x],firstLetterIndex=x;break}html.splice(0,1),letters[firstLetterIndex]=firstLetter.toUpperCase(),this[i].innerHTML=letters.join("")+html.join(" ")}}return this},proto.is=function(values,callback){values instanceof Array&&"object"==typeof values||(values=[values]);for(let i=0;i<this.length;i++)for(let x=0;x<values.length;x++)if(this[i]===values[x])return callback&&callback(),!0;return!1},proto.single=function(){return this[0]},proto.exists=function(callback){return!(!this[0]||0===this[0].length||(callback=callback?callback():null,0))},proto.focus=function(){return this[0].focus(),this},proto.select=function(){return this[0].select(),this},proto.module=function(callback,before,after){var markup=this[0],beforeOriginal=before||"{{",afterOriginal=after||"}}",lib={};return before=helper.escape(beforeOriginal),after=helper.escape(afterOriginal),lib.placeholder=function(placeholderName,content){var reg=new RegExp(`${before}${placeholderName}${after}`,"igm");return markup=markup.replace(reg,content)},lib.wrap=function(placeholderName,wrap,attr){var placeholders=placeholderName.split(/ ,|, |,/g);for(let i=0;i<placeholders.length;i++){var elem=document.createElement(wrap);if(attr){var attrs=attr.split(/ ,|, |,/);for(let x=0;x<attrs.length;x++){var key=attrs[x].split(/=/)[0],value=attrs[x].split(/=/)[1];helper.exe(elem,"setAttribute",key,value)}}var reg=new RegExp(`${before}${placeholders[i]}${after}`,"igm");elem.innerHTML=`${beforeOriginal}${placeholders[i]}${afterOriginal}`,markup=markup.replace(reg,elem.outerHTML)}return markup},lib.container=function(element,attr){var elem=document.createElement(element);if(elem.innerHTML=markup,attr){var attrs=attr.split(/ ,|, |,/);for(let x=0;x<attrs.length;x++){var key=attrs[x].split(/=/)[0],value=attrs[x].split(/=/)[1];helper.exe(elem,"setAttribute",key,value)}}return markup=elem},lib.clear=function(...placeholder){for(let i=0;i<placeholder.length;i++){var reg=new RegExp(`${before}${placeholder[i]}${after}`,"igm");markup=markup.replace(reg,"")}},callback&&callback(lib),markup},proto.pushModule=function(name,module){this.pullModule[name]=module},proto.pullModule=function(name){return this.pullModule[name]},function(selector,context){if(selector&&!context)return new Xenium(query.selector(selector),selector);if(context){var xenium=new Xenium(query.selector(selector),selector,context);return xenium.length>1?xenium:xenium[0]}return new Xenium([document])}}();class Interpolate{constructor(){this.block={},this.value={}}data(markup){this.markup=markup}_logicIf(markup,interpolate,value){value=(value=value instanceof Array?value.toString():value)instanceof Function?value():value;var ifReg=new RegExp("({%(| )if (.*?)(| )%}([\\S\\s]*?){%(| )endif(| )%})","igm"),ifBlocks=this._getMarkupBlock(ifReg.exec(markup)),valueData=value?value.replace(/ {2,}|\n|\n+/gim,""):"undefined";if(ifBlocks){var valueSet=ifBlocks[2],ifBlock=ifBlocks[0],ifBlockInner=ifBlocks[3],noValue;interpolate===valueSet?markup=!valueData||"false"===valueData||"undefined"===valueData||"null"===valueData||" "===valueData?markup.replace(ifBlock,""):markup.replace(ifBlock,ifBlockInner):valueSet.match(/{\?.*?\?}/gim)||(markup="false"===valueSet||"undefined"===valueSet||"null"===valueSet?markup.replace(ifBlock,""):markup.replace(ifBlock,ifBlockInner))}return markup}_logicEach(markup,interpolate,value){var eachReg=new RegExp("({%(| )each (.*?) as (.*?)(| )%}([\\S\\s]*?){%(| )endeach(| )%})","igm"),eachBlocks=this._getMarkupBlock(eachReg.exec(markup)),valueData=value;if(eachBlocks){var valueSet=eachBlocks[2],proxyValue=eachBlocks[3],eachBlock=eachBlocks[0],eachBlockInner=eachBlocks[4],newEachInner="";interpolate===valueSet&&(value instanceof Array?(value.forEach(val=>{var eachInnerMarkup;newEachInner+=eachBlockInner.replace(proxyValue,val)}),eachBlockInner=newEachInner,markup=markup.replace(eachBlock,eachBlockInner)):markup=markup.replace(eachBlock,""))}return markup}defineKey(name,values){this.value[name]={},this.value[name].interpolate="",values.forEach((item,i)=>{this.value[name].interpolate+=`({\\?(| )${item}(| )\\?})`,i!==values.length-1&&(this.value[name].interpolate+="|")})}setKeyValue(content){var markup=this.markup;for(let key in content){var interpolateValue=this.value[key].interpolate,valueReg=new RegExp(interpolateValue,"igm"),valueMatches=markup.match(valueReg);if(valueMatches)for(let i=0;i<valueMatches.length;i++)markup=this._logicIf(markup,valueMatches[i],content[key].value),markup=(markup=this._logicEach(markup,valueMatches[i],content[key].value)).replace(valueMatches[i],content[key].value)}return markup}defineBlock(name,content){this.block[name]={},this.block[name].block=`{\\!(| )${name}:start(| )\\!}([\\S\\s]*?){\\!(| )${name}:end(| )\\!}`,this.block[name].interpolate=[];for(let key in content){var interpolateValues=content[key].interpolate,interpolateProps={placeholder:""};interpolateValues.forEach((item,i)=>{interpolateProps.placeholder+=`({\\?(| )${item}(| )\\?})`,i!==interpolateValues.length-1&&(interpolateProps.placeholder+="|")}),this.block[name].interpolate.push(interpolateProps)}}blockData(content){var markup=this.markup,interpolatedMarkup=markup;for(let key in content){var blockItem=this.block[key],blockMatches=this._getMarkupBlock(new RegExp(blockItem.block,"igm").exec(markup)),blockFull=blockMatches?blockMatches[0]:"",blockInner=blockMatches?blockMatches[1]:"",interpolate;blockItem.interpolate.forEach((item,i)=>{var interpolateMatches=this._getMarkupBlock(blockInner.match(new RegExp(item.placeholder,"igm")));if(interpolateMatches)for(let x=0;x<interpolateMatches.length;x++)blockInner=blockInner.replace(interpolateMatches[x],content[key].value)}),interpolatedMarkup=interpolatedMarkup?interpolatedMarkup.replace(blockFull,blockInner):""}return interpolatedMarkup}cleanMarkup(markup){return markup.replace(/{\!(| ).*?(| )\!}([\S\s]*?){\!(| ).*?(| )\!}|{\?(| ).*?(| )\?}/gim,"")}_getMarkupBlock(exec){return exec?exec.filter(item=>" "!==item&&void 0!==item):exec}}const helper=function(){var fn={formatText:function(text,formatting){if(!formatting)return text;var formatted=text,formats={italic:"em",bold:"strong",small:"small",strikethrough:"s",color:item=>`<span style="color: ${item.hex};">`,link:item=>item.url?`<a href="${item.url}">`:"<a>"},textArray=text.split("");return formatting.forEach(item=>{var start=item.start,end=item.end,format=item.type,textArrayEnd=textArray[end]?textArray[end]:"",textArrayStart=textArray[start]?textArray[start]:"";if(x([format]).is(["color","link"])){if("link"===format){var link=formats[format](item);textArrayStart=textArrayStart.match(/<\/.*?>/gim)?textArrayStart.replace(/(<\/.*?>)/gim,`$1${span}`):`${link}${textArrayStart}`,textArray[start]=textArrayStart,textArray[end]=`</a>${textArrayEnd}`}else if("color"===format){var span=formats[format](item);textArrayStart=textArrayStart.match(/<\/.*?>/gim)?textArrayStart.replace(/(<\/.*?>)/gim,`$1${span}`):`${span}${textArrayStart}`,textArray[start]=`${textArrayStart}`,textArray[end]=`</span>${textArrayEnd}`}}else textArrayStart=textArrayStart.match(/<\/.*?>/gim)?textArrayStart.replace(/(<\/.*?>)/gim,`$1<${formats[format]}>`):`<${formats[format]}>${textArrayStart}`,textArray[start]=textArrayStart,textArray[end]=`</${formats[format]}>${textArrayEnd}`}),textArray.join("")},textType:function(text,subtype){var headings;return{heading1:text=>`<h1>${text}</h1>`,heading2:text=>`<h2>${text}</h2>`,heading3:text=>`<h3>${text}</h3>`,heading4:text=>`<h4>${text}</h4>`,heading5:text=>`<h5>${text}</h5>`,heading6:text=>`<h6>${text}</h6>`,quote:text=>`<blockquote>${text}</blockquote>`,chat:text=>`<strong>${text}</strong>`,quirky:text=>`<span style="font-family: Fairwater,Georgia,Times,Times New Roman,serif;">${text}</span>`,indented:text=>`<blockquote class="_paradigm-text-indented">${text}</blockquote>`,"unordered-list-item":text=>`<ul><li>${text}</li></ul>`,"ordered-list-item":text=>`<ol><li>${text}</li></ol>`,p:text=>`<p>${text}</p>`}[subtype](text)},getFileExt:function(file){var split=file.split(/\./gim),ext;return split[split.length-1]},hasLength:function(array){return array.length>0}};return fn}();class Photoset extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"});var template=document.createElement("div"),columns=this.getAttribute("columns"),urls,urlArray=this.getAttribute("urls").split(","),imgList=[];urlArray.forEach(url=>{imgList.push(`<div class="_paradigm-image-container"><img src="${url}"></div>`)}),template.innerHTML=`\n            <style>\n                ._paradigm-image-set-wrapper {\n                    width: 100%;\n                    display: grid;\n                    grid-template-columns: repeat(${columns}, minmax(calc(${100/columns}% - 5px), 1fr));\n                    margin-bottom: 5px;\n                    grid-gap: 5px;\n                }\n\n                ._paradigm-image-container img {\n                    width: 100%;\n                    height: 100%;\n                    object-fit: cover;\n                }\n            </style>\n\n            <section class="_paradigm-image-set-wrapper">\n                ${imgList.join("")}\n            </section>\n        `,this.shadowRoot.appendChild(template)}}class Blocks{_structurePosts(postItem){postItem.content.forEach(mediaItem=>{this.getLinkBlock||this.blockLink(()=>'\n                         {% if {? source ?} %}\n                             {? source ?}\n                         {% endif %}\n \n                         <section class="_paradigm-link-wrapper">\n                             {? link ?}\n                         </section>\n                     '),this.getAudioBlock||this.blockAudio(()=>'\n                         {% if {? source ?} %}\n                             {? source ?}\n                         {% endif %}\n \n                         <section class="_paradigm-audio-wrapper">\n                             {? audio ?}\n                         </section>\n                     '),this.getVideoBlock||this.blockVideo(()=>'\n                         {% if {? source ?} %}\n                             {? source ?}\n                         {% endif %}\n                         \n                         <section class="_paradigm-video-wrapper">\n                             {? video ?}\n                         </section>\n                     '),this.getAskBlock||this.blockAsk(()=>'\n                         {% if {? source ?} %}\n                             {? source ?}\n                         {% endif %}\n \n                         <section class="_paradigm-question-wrapper">\n                             <p>Asked by: <a href="{? asker-url ?}">{? asker-name ?}</a></p>\n                             {? ask ?}\n                         </section>\n \n                         {? answer ?}\n                     '),this.getImageSetBlock||this.blockImageSet(()=>"\n                         {% if {? source ?} %}\n                             {? source ?}\n                         {% endif %}\n \n                         {? use-paradigm-imageset ?}\n                     "),this.getImageBlock||this.blockImage(()=>'\n                         {% if {? source ?} %}\n                             {? source ?}\n                         {% endif %}\n \n                         <section class="_paradigm-image-wrapper">\n                             {? image ?}\n                         </section>\n                     '),this.getTextBlock||this.blockText(()=>"\n                         {% if {? source ?} %}\n                             {? source ?}\n                         {% endif %}\n \n                         {? text ?}\n                     "),this.getLinkBlock&&this.getLinkBlock(postItem,mediaItem),this.getAudioBlock&&this.getAudioBlock(postItem,mediaItem),this.getVideoBlock&&this.getVideoBlock(postItem,mediaItem),this.getAskBlock&&this.getAskBlock(postItem,mediaItem),this.getImageSetBlock&&this.getImageSetBlock(postItem,mediaItem),this.getImageBlock&&this.getImageBlock(postItem,mediaItem),this.getTextBlock&&this.getTextBlock(postItem,mediaItem)})}_globalValues(interpolationGroups,media,interpolate){interpolate.defineKey("source",["source","source-blog","blog"]),interpolate.defineKey("sourceBackgroundColour",["source-background-color","source-background-colour","source-background"]),interpolate.defineKey("sourceLinkColour",["source-link-colour","source-link-colour"]),interpolate.defineKey("sourceTitleColour",["source-title-colour","source-title-colour"]),interpolationGroups.source={value:media.blog?`\n                 <div class="_paradigm-source-blog">\n                     <a href="${media.blog.url}">${media.blog.name}</a>\n                 </div>\n             `:""},interpolationGroups.sourceBackgroundColour={value:media.blog?media.blog.theme.background_color:""},interpolationGroups.sourceLinkColour={value:media.blog?media.blog.theme.link_color:""},interpolationGroups.sourceTitleColour={value:media.blog?media.blog.theme.title_color:""}}blockLink(callback){var blockInfo=callback?callback():null,interpolate=new Interpolate;interpolate.data(blockInfo),interpolate.defineKey("link",["link"]),interpolate.defineKey("linkImage",["img","image","images"]),interpolate.defineKey("linkTitle",["title"]),interpolate.defineKey("linkUrl",["url"]),interpolate.defineKey("linkSource",["link-src","link-source"]),interpolate.defineKey("description",["description"]),this._getBlockData("link",(post,media)=>{if("link"===media.type){var interpolationGroups={link:{value:media.build},linkImage:{value:media.linkImage?media.linkImage:""},linkTitle:{value:media.title},linkUrl:{value:media.url},linkSource:{value:media.site_name},description:{value:media.description}};this._globalValues(interpolationGroups,media,interpolate),blockInfo=interpolate.setKeyValue(interpolationGroups),post.html+=blockInfo}})}blockAudio(callback){var blockInfo=callback?callback():null,interpolate=new Interpolate;interpolate.data(blockInfo),interpolate.defineKey("audio",["audio"]),interpolate.defineKey("albumArtUrl",["album-art","artwork"]),interpolate.defineKey("albumArtImage",["album-art-image","album-art-img"]),this._getBlockData("audio",(post,media)=>{if("audio"===media.type){var interpolationGroups={audio:{value:media.build},albumArtUrl:{value:media.albumArt?media.albumArt:""},albumArtImage:{value:media.albumArt?`<img src="${media.albumArt}">`:""}};this._globalValues(interpolationGroups,media,interpolate),blockInfo=interpolate.setKeyValue(interpolationGroups),post.html+=blockInfo}})}blockVideo(callback){var blockInfo=callback?callback():null,interpolate=new Interpolate;interpolate.data(blockInfo),interpolate.defineKey("video",["vid","video"]),interpolate.defineKey("videoUrl",["vid-url","video-url"]),interpolate.defineKey("videoTitle",["vid-title","video-title"]),this._getBlockData("video",(post,media)=>{if("video"===media.type){var interpolationGroups={video:{value:media.build},videoUrl:{value:media.url},videoTitle:{value:media.title?media.title:""}};this._globalValues(interpolationGroups,media,interpolate),blockInfo=interpolate.setKeyValue(interpolationGroups),post.html+=blockInfo}})}blockAsk(callback){var blockInfo=callback?callback():null,interpolate=new Interpolate;interpolate.data(blockInfo),interpolate.defineKey("ask",["ask","question"]),interpolate.defineKey("askerName",["asker-name","asker"]),interpolate.defineKey("askerUrl",["asker-url","asker-link"]),interpolate.defineKey("answer",["answer"]),interpolate.defineKey("answerText",["answer-text"]),interpolate.defineKey("answerName",["answer-name","answerer"]),interpolate.defineKey("answerUrl",["answer-url","answer-link"]),this._getBlockData("ask",(post,media)=>{if("ask"===media.type){var interpolationGroups={ask:{value:media.askTextBuild},askerName:{value:media.askerBlog.name},askerUrl:{value:media.askerBlog.url},answer:{value:media.answerTextBuild?` \n                             <section class="_paradigm-answer-wrapper">\n                                 {% if {? answer-url ?} %}\n                                     <p>Answered By: <a href="{? answer-url ?}">{? answer-name ?}</a></p>\n                                 {% endif %}\n \n                                 ${media.answerTextBuild}\n                             </section>\n                         `:""},answerText:media.answerTextBuild?media.answerTextBuild:"",answerName:{value:media.answerBlog?media.answerBlog.name:""},answerUrl:{value:media.answerBlog?media.answerBlog.url:""}};this._globalValues(interpolationGroups,media,interpolate),blockInfo=interpolate.setKeyValue(interpolationGroups),post.html+=blockInfo}})}blockImageSet(callback){var blockInfo=callback?callback():null,interpolate=new Interpolate;interpolate.data(blockInfo),interpolate.defineKey("imageSet",["img","image","images"]),interpolate.defineKey("imageUrl",["img-url","image-url"]),interpolate.defineKey("paradigmImageSet",["use-paradigm-imageset","use-paradigm-photoset"]),this._getBlockData("image-set",(post,media)=>{if("image"===media.type&&"set"===media.displayType){var interpolationGroups={paradigmImageSet:{value:`\n                             <paradigm-photoset columns="${media.urlList.length}" urls="${media.urlList.toString()}">\n                             </paradigm-photoset>\n                         `},imageSet:{value:media.build},imageUrl:{value:media.urlList}};this._globalValues(interpolationGroups,media,interpolate),blockInfo=interpolate.setKeyValue(interpolationGroups),post.html+=blockInfo}})}blockImage(callback){var blockInfo=callback?callback():null,interpolate=new Interpolate;interpolate.data(blockInfo),interpolate.defineKey("image",["img","image","images"]),this._getBlockData("image",(post,media)=>{if("image"===media.type&&"single"===media.displayType){var interpolationGroups={image:{value:media.build}};this._globalValues(interpolationGroups,media,interpolate),blockInfo=interpolate.setKeyValue(interpolationGroups),post.html+=blockInfo}})}blockText(callback){var blockInfo=callback?callback():null,interpolate=new Interpolate;interpolate.data(blockInfo),interpolate.defineKey("text",["txt","text"]),this._getBlockData("text",(post,media)=>{if("text"===media.type&&!media.category){var interpolationGroups={text:{value:media.build}};this._globalValues(interpolationGroups,media,interpolate),blockInfo=interpolate.setKeyValue(interpolationGroups),post.html+=blockInfo}})}_getBlockData(type,callback){"image"===type?this.getImageBlock=callback:"image-set"===type?this.getImageSetBlock=callback:"text"===type?this.getTextBlock=callback:"ask"===type?this.getAskBlock=callback:"video"===type?this.getVideoBlock=callback:"audio"===type?this.getAudioBlock=callback:"link"===type&&(this.getLinkBlock=callback)}}class Posts extends Blocks{_prepare(postList){for(let i=0;i<postList.length;i++)postList[i].html="",this._extractPostContentGroups(postList[i]);return postList}_extractPostContentGroups(postItem){var post=postItem.post;if(postItem.content=[],helper.hasLength(post.trail)&&post.trail.forEach(trailItem=>{var contentGroup={};contentGroup.content=trailItem.content,contentGroup.layout=trailItem.layout,contentGroup.blog=trailItem.blog,postItem.content.push(contentGroup)}),helper.hasLength(post.content)){var contentGroup={};contentGroup.content=post.content,contentGroup.layout=post.layout,postItem.content.push(contentGroup)}this._organsizePostLayout(postItem.content),this._getBuilds(postItem),this._structurePosts(postItem)}_getBuilds(postItem){var content=[];postItem.content.forEach(contentItem=>{contentItem.content=contentItem.content.filter(Boolean),contentItem.content.forEach(postContent=>{content.push(postContent)})}),postItem.content=content}_organsizePostLayout(postContentGroup){postContentGroup.forEach(group=>{var layoutNew=[];group.blog&&(group.content[0].blog=group.blog),helper.hasLength(group.layout)?group.layout.forEach(layoutItem=>{"ask"===layoutItem.type?(layoutItem.attribution&&(group.content[0].askerBlog=layoutItem.attribution.blog,group.content[0].blog=layoutItem.attribution.blog),group.content[0].category="ask",group.content[1]&&(group.content[1].category="answer"),group.content[0].type="ask",group.content[1]&&(group.content[1].type="ask"),group.blog&&(group.content[1].answerBlog=group.blog),group.content[1]?layoutNew.push([0,1]):layoutNew.push([0])):"rows"===layoutItem.type&&layoutItem.display.forEach(displayItem=>{layoutNew.push(displayItem.blocks)})}):group.content.forEach((contentItem,i)=>{layoutNew.push([i])}),group.layout=layoutNew}),this._arrangeContent(postContentGroup)}_arrangeContent(postContentGroup){postContentGroup.forEach(group=>{group.layout.forEach(layoutItem=>{var wrapper={};layoutItem.length>1?(this._getContentImageSet(wrapper,layoutItem,group.content),this._getContentAsk(wrapper,layoutItem,group.content)):layoutItem.forEach(layoutIndex=>{this._getContentText(wrapper,group.content[layoutIndex]),this._getContentImage(wrapper,group.content[layoutIndex]),this._getContentVideo(wrapper,group.content[layoutIndex]),this._getContentAudio(wrapper,group.content[layoutIndex]),this._getContentLink(wrapper,group.content[layoutIndex])})})})}_getContentAsk(wrapper,layoutItem,contentItem){layoutItem.forEach((layoutIndex,i)=>{if("ask"===contentItem[layoutIndex].type){var content=contentItem[layoutIndex];if(wrapper.type="ask","ask"===content.category){var text=text||content.text,subtype=content.subtype?content.subtype:"p";content.formatting&&(text=helper.formatText(text,content.formatting)),text=helper.textType(text,subtype),wrapper.askTextBuild=text,wrapper.askText=content.text,wrapper.askerBlog=content.askerBlog}else if("answer"===content.category){var text=text||content.text,subtype=content.subtype?content.subtype:"p";content.formatting&&(text=helper.formatText(text,content.formatting)),text=helper.textType(text,subtype),wrapper.answerTextBuild=text,wrapper.answerText=content.text,content.answerBlog&&(wrapper.answerBlog=content.answerBlog)}i===layoutItem.length-1?contentItem[layoutIndex]=wrapper:contentItem[layoutIndex]=""}})}_getContentLink(wrapper,contentItem){"link"===contentItem.type&&(wrapper=contentItem,contentItem.poster&&(wrapper.linkImage=contentItem.poster[0].url),wrapper.build=`<a href="${contentItem.display_url}">${contentItem.title}</a>`)}_getContentAudio(wrapper,contentItem){"audio"===contentItem.type&&(wrapper=contentItem,"tumblr"===contentItem.provider?contentItem.embed_html&&(wrapper.build=`<iframe src="${contentItem.embed_url}" frameborder="0"></iframe>`,wrapper.albumArt=contentItem.poster[0].url):(contentItem.attribution&&(wrapper.source=contentItem.attribution.app_name,wrapper.sourceLogo=contentItem.attribution.logo.url),wrapper.build=`<iframe src="${contentItem.embed_url}" frameborder="0"></iframe>`))}_getContentVideo(wrapper,contentItem){"video"===contentItem.type&&((wrapper=contentItem).type="video","tumblr"!==contentItem.provider&&contentItem.provider?(contentItem.attribution&&(wrapper.source=contentItem.attribution.app_name,wrapper.title=contentItem.attribution.display_text),wrapper.url=contentItem.url,wrapper.build=contentItem.embed_html):(wrapper.build=`\n                    <video type="${contentItem.media.type}" controls class="_paradigm-video">\n                        <source src="${contentItem.media.url}">\n                    </video>\n                `,wrapper.url=contentItem.media.url))}_getContentImage(wrapper,contentItem){if("image"===contentItem.type){var mediaHalf=Math.floor(.5*contentItem.media.length);wrapper=contentItem,contentItem.blog&&(wrapper.blog=contentItem.blog),wrapper.type="image",wrapper.displayType="single",contentItem.media.forEach((mediaItem,i)=>{i===mediaHalf&&(wrapper.build=`<img src="${mediaItem.url}" high-res="${contentItem.media[0].url}">`)})}}_getContentImageSet(wrapper,layoutItem,contentItem){layoutItem.forEach((layoutIndex,i)=>{if("image"===contentItem[layoutIndex].type){var content=contentItem[layoutIndex],mediaHalf=Math.floor(.5*content.media.length);contentItem[layoutIndex]=wrapper,wrapper.build=wrapper.build?wrapper.build:"",wrapper.type="image",wrapper.displayType="set",wrapper.urlList=wrapper.urlList?wrapper.urlList:[],wrapper.highResUrl=wrapper.highResUrl?wrapper.highResUrl:[],content.blog&&(wrapper.blog=content.blog),content.media.forEach((mediaItem,i)=>{i===mediaHalf&&(wrapper.build+=`<img src="${mediaItem.url}" high-res="${content.media[0].url}">`,wrapper.urlList.push(mediaItem.url),wrapper.highResUrl.push(content.media[0].url))}),i>0&&(contentItem[layoutIndex]="")}})}_getContentText(wrapper,contentItem){if("text"===contentItem.type&&!contentItem.category){var text=text||contentItem.text,subtype=contentItem.subtype?contentItem.subtype:"p";contentItem.blog&&(wrapper.blog=contentItem.blog),contentItem.formatting&&(text=helper.formatText(text,contentItem.formatting)),text=helper.textType(text,subtype),(wrapper=contentItem).build=text,wrapper.displayType="single"}}}class Paradigm extends Posts{constructor(callback){super(),this.callback=callback,this.extend=new Interpolate("stuff"),this.callback&&this.callback()}posts(postList){this.postList=postList,this.postsFormatted=this._prepare(this.postList),customElements.get("paradigm-photoset")||customElements.define("paradigm-photoset",Photoset)}_dynamicValues(post,valSets){var extend=this.extend;extend.defineKey("content",["content","post-content","post"]);for(let key in post)"html"!==key&&"post"!==key&&"content"!==key&&(valSets[key]={},valSets[key].value=post[key],extend.defineKey(key,[key]))}getRenderMarkup(callback){this.renderMarkupGetter=callback}loaded(callback){x().events("readystatechange",()=>{"complete"===document.readyState&&callback&&callback()})}render(elem,postElem,callback){var markup=callback?callback():"",posts=this.postsFormatted,extend=this.extend;markup=this.renderMarkupGetter?this.renderMarkupGetter(markup):markup,extend.data(markup),posts.forEach((post,i)=>{var wrapper=x().make(postElem),valSets={};x(wrapper).write("html",markup),this._dynamicValues(post,valSets),extend.data(wrapper[0].innerHTML),wrapper[0].innerHTML=extend.setKeyValue({content:{value:post.html}}),extend.data(wrapper[0].innerHTML),wrapper[0].innerHTML=extend.setKeyValue(valSets),valSets={},x(wrapper).write("html",wrapper[0].innerHTML),wrapper[0].innerHTML=extend.cleanMarkup(wrapper[0].innerHTML),x(elem).append(wrapper)})}renderToElement(container,elem){var postElem=x(elem),posts=this.postsFormatted,newContainer=x().make(x(container)[0].localName),markup=x(postElem).value("innerHTML").replace(/<\!--|-->/gim,""),extend=this.extend,attrs=postElem[0].attributes,newContainerAttrs=x(container)[0].attributes;markup=this.renderMarkupGetter?this.renderMarkupGetter(markup):markup,extend.data(markup);for(let key in newContainerAttrs){if(!newContainerAttrs[key].name)break;if(newContainerAttrs[key].name&&!newContainerAttrs[key].nodeValue)break;x(newContainer).attr("set",`${newContainerAttrs[key].name}=${newContainerAttrs[key].nodeValue}`)}x(container).classList("+","old-container"),posts.forEach((post,i)=>{var wrapper=x().make(postElem[0].localName.toLowerCase()),valSets={};x(wrapper).write("html",markup);for(let key in attrs){if(!attrs[key].name)break;if(attrs[key].name&&!attrs[key].nodeValue)break;x(wrapper).attr("set",`${attrs[key].name}=${attrs[key].nodeValue}`)}this._dynamicValues(post,valSets),extend.data(wrapper[0].innerHTML),wrapper[0].innerHTML=extend.setKeyValue({content:{value:post.html}}),extend.data(wrapper[0].innerHTML),wrapper[0].innerHTML=extend.setKeyValue(valSets),valSets={},x(wrapper).write("html",wrapper[0].innerHTML),postElem[0].innerHTML=extend.cleanMarkup(postElem[0].innerHTML),x(newContainer).append(wrapper)}),x().events("readystatechange",()=>{"complete"===document.readyState&&(x("{b}").prepend(newContainer,x(".old-container")),x(postElem).remove(),x(".old-container").remove(),this.postNodes=x(elem+" {all}"))})}renderToPost(elem){var postElem=x(elem),posts=this.postsFormatted,markup=x(postElem).value("innerHTML").replace(/<\!--|-->/gim,""),extend=this.extend;markup=this.renderMarkupGetter?this.renderMarkupGetter(markup):markup,x(postElem).write("html",markup),extend.data(markup),posts.forEach((post,i)=>{var valSets={};this._dynamicValues(post,valSets),extend.data(postElem[0].innerHTML),postElem[0].innerHTML=extend.setKeyValue({content:{value:post.html}}),extend.data(postElem[0].innerHTML),postElem[0].innerHTML=extend.setKeyValue(valSets),valSets={},x(postElem).write("html",postElem[0].innerHTML),postElem[0].innerHTML=extend.cleanMarkup(postElem[0].innerHTML)})}}